{% extends "base.html" %}
{% block content %}
<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6">
    <h2 class="text-xl sm:text-2xl font-bold"><i class="fa-solid fa-arrows-spin text-indigo-600 mr-2"></i>Content Pipeline</h2>
    <div class="flex flex-wrap items-center gap-2 w-full sm:w-auto">
        <select id="pipeline-filter-client" onchange="loadPipeline()" class="border rounded-lg px-3 py-2 text-sm"><option value="">All Clients</option></select>
        <select id="pipeline-filter-assignee" onchange="loadPipeline()" class="border rounded-lg px-3 py-2 text-sm"><option value="">All Members</option></select>
    </div>
</div>
<div class="kanban-board" id="pipeline-board">
    <div class="kanban-column">
        <div class="kanban-column-header"><span><i class="fa-solid fa-file-pen text-gray-400 mr-2"></i>Draft</span><span class="text-xs bg-gray-200 px-2 py-1 rounded-full" id="pcount-draft">0</span></div>
        <div class="kanban-cards" id="pcol-draft" data-status="draft"></div>
    </div>
    <div class="kanban-column">
        <div class="kanban-column-header"><span><i class="fa-solid fa-pen-nib text-yellow-500 mr-2"></i>Needs Caption</span><span class="text-xs bg-yellow-200 px-2 py-1 rounded-full" id="pcount-needs_caption">0</span></div>
        <div class="kanban-cards" id="pcol-needs_caption" data-status="needs_caption"></div>
    </div>
    <div class="kanban-column">
        <div class="kanban-column-header"><span><i class="fa-solid fa-palette text-pink-500 mr-2"></i>In Design</span><span class="text-xs bg-pink-200 px-2 py-1 rounded-full" id="pcount-in_design">0</span></div>
        <div class="kanban-cards" id="pcol-in_design" data-status="in_design"></div>
    </div>
    <div class="kanban-column">
        <div class="kanban-column-header"><span><i class="fa-solid fa-magnifying-glass text-yellow-500 mr-2"></i>Design Review</span><span class="text-xs bg-yellow-200 px-2 py-1 rounded-full" id="pcount-design_review">0</span></div>
        <div class="kanban-cards" id="pcol-design_review" data-status="design_review"></div>
    </div>
    <div class="kanban-column">
        <div class="kanban-column-header"><span><i class="fa-solid fa-circle-check text-green-500 mr-2"></i>Approved</span><span class="text-xs bg-green-200 px-2 py-1 rounded-full" id="pcount-approved">0</span></div>
        <div class="kanban-cards" id="pcol-approved" data-status="approved"></div>
    </div>
    <div class="kanban-column">
        <div class="kanban-column-header"><span><i class="fa-solid fa-clock text-blue-500 mr-2"></i>Scheduled</span><span class="text-xs bg-blue-200 px-2 py-1 rounded-full" id="pcount-scheduled">0</span></div>
        <div class="kanban-cards" id="pcol-scheduled" data-status="scheduled"></div>
    </div>
</div>
{% endblock %}

{% block modals %}
<!-- Post Detail Modal -->
<div id="post-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50 p-4" onclick="if(event.target===this) hidePostDetailModal()">
    <div class="bg-white rounded-xl p-6 w-full sm:w-[750px] max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold" id="post-detail-title">Post Details</h3>
            <button onclick="hidePostDetailModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
        </div>
        <div id="post-detail-content"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/pipeline.js"></script>
{% endblock %}
